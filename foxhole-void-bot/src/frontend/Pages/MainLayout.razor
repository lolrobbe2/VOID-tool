@using FoxholeBot;
@using FoxholeBot.src.Discord
@using FoxholeBot.src.Discord.commands
@using FoxholeBot.src.Discord.shemas
@using Microsoft.JSInterop
@using foxhole_void_bot.src.frontend.Pages.Components.SideBar
@inherits LayoutComponentBase
@inject DiscordSDK sdk
@inject Microsoft.Extensions.Options.IOptions<AssetOptions> AssetConfig
@inject IJSRuntime JS

<div class="body">

    <SideBar />
    @Body
</div>

@code {
    private string Title => "Foxhole VOID Bot";
    private bool auth = false;


    protected async override void OnInitialized()
    {
        var assetMode = AssetConfig.Value.AssetMode;
        await sdk.Ready();
        if (!auth)
        {

            var test = await sdk.SendCommand(new AuthorizeCommand(sdk.clientId,[OAuthScope.Identify,OAuthScope.ApplicationsCommands]));
            Console.WriteLine("yippee");
        }

        auth = true;
    }
}
