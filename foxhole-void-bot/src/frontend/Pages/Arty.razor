@page "/arty"
@using FoxholeBot.types
@using foxhole_void_bot.src.frontend.Pages.Components.Arty.MapMarker
@using foxhole_void_bot.src.frontend.Pages.Components.Arty.MapSelect
@using foxhole_void_bot.src.frontend.Pages.Components.Arty.MapView
<MapSelect OnMapSelected="@HandleMapSelection" />
@if (!string.IsNullOrEmpty(selectedUri))
{
    <MapView uri="@selectedUri" name="@selectedName" OnImageClick="@HandleMapClick" OnMove="@HandleMapMove" />
}

@code {
    private double metersPerPixel = 1900 / 1776; 
    private string selectedUri;
    private string selectedName;    
    private void HandleMapSelection((string Uri, string Name) selection)
    {
        selectedUri = selection.Uri;
        selectedName = selection.Name;
        Console.WriteLine($"Map selected: {selection.Name} ({selection.Uri})");
        // You can now load the map, update UI, etc.
    }

    private void HandleMapClick((Coordinate coordinate, UInt16 screenX, UInt16 screenY) coordinates)
    {
      
        Console.WriteLine($"Clicked on: x:{coordinates.coordinate.X} y: {coordinates.coordinate.Y}!");
    }

    private void HandleMapMove((UInt16 X, UInt16 Y) offset)
    {
       
    }

}

